---
id: 857
title: Get MySql database sizes
date: 2018-11-13T17:45:07+00:00
author: Prabuddha
layout: post
guid: https://prabuddha.me/?p=857
permalink: /get-mysql-database-sizes/
categories:
  - DevOps
  - linux
---
Here are more organized queries against the INFORMATION_SCHEMA.

<h1>Sizes By Storage Engine</h1>

<pre class="lang-sql prettyprint prettyprinted"><code><span class="kwd">SELECT</span><span class="pln"> IFNULL</span><span class="pun">(</span><span class="pln">B</span><span class="pun">.</span><span class="pln">engine</span><span class="pun">,</span><span class="str">'Total'</span><span class="pun">)</span> <span class="str">"Storage Engine"</span><span class="pun">,</span><span class="pln">
CONCAT</span><span class="pun">(</span><span class="pln">LPAD</span><span class="pun">(</span><span class="pln">REPLACE</span><span class="pun">(</span><span class="pln">FORMAT</span><span class="pun">(</span><span class="pln">B</span><span class="pun">.</span><span class="pln">DSize</span><span class="pun">/</span><span class="pln">POWER</span><span class="pun">(</span><span class="lit">1024</span><span class="pun">,</span><span class="pln">pw</span><span class="pun">),</span><span class="lit">3</span><span class="pun">),</span><span class="str">','</span><span class="pun">,</span><span class="str">''</span><span class="pun">),</span><span class="lit">17</span><span class="pun">,</span><span class="str">' '</span><span class="pun">),</span><span class="str">' '</span><span class="pun">,</span><span class="pln">
SUBSTR</span><span class="pun">(</span><span class="str">' KMGTP'</span><span class="pun">,</span><span class="pln">pw</span><span class="lit">+1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),</span><span class="str">'B'</span><span class="pun">)</span> <span class="str">"Data Size"</span><span class="pun">,</span><span class="pln"> CONCAT</span><span class="pun">(</span><span class="pln">LPAD</span><span class="pun">(</span><span class="pln">REPLACE</span><span class="pun">(</span><span class="pln">
FORMAT</span><span class="pun">(</span><span class="pln">B</span><span class="pun">.</span><span class="pln">ISize</span><span class="pun">/</span><span class="pln">POWER</span><span class="pun">(</span><span class="lit">1024</span><span class="pun">,</span><span class="pln">pw</span><span class="pun">),</span><span class="lit">3</span><span class="pun">),</span><span class="str">','</span><span class="pun">,</span><span class="str">''</span><span class="pun">),</span><span class="lit">17</span><span class="pun">,</span><span class="str">' '</span><span class="pun">),</span><span class="str">' '</span><span class="pun">,</span><span class="pln">
SUBSTR</span><span class="pun">(</span><span class="str">' KMGTP'</span><span class="pun">,</span><span class="pln">pw</span><span class="lit">+1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),</span><span class="str">'B'</span><span class="pun">)</span> <span class="str">"Index Size"</span><span class="pun">,</span><span class="pln"> CONCAT</span><span class="pun">(</span><span class="pln">LPAD</span><span class="pun">(</span><span class="pln">REPLACE</span><span class="pun">(</span><span class="pln">
FORMAT</span><span class="pun">(</span><span class="pln">B</span><span class="pun">.</span><span class="pln">TSize</span><span class="pun">/</span><span class="pln">POWER</span><span class="pun">(</span><span class="lit">1024</span><span class="pun">,</span><span class="pln">pw</span><span class="pun">),</span><span class="lit">3</span><span class="pun">),</span><span class="str">','</span><span class="pun">,</span><span class="str">''</span><span class="pun">),</span><span class="lit">17</span><span class="pun">,</span><span class="str">' '</span><span class="pun">),</span><span class="str">' '</span><span class="pun">,</span><span class="pln">
SUBSTR</span><span class="pun">(</span><span class="str">' KMGTP'</span><span class="pun">,</span><span class="pln">pw</span><span class="lit">+1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),</span><span class="str">'B'</span><span class="pun">)</span> <span class="str">"Table Size"</span> <span class="kwd">FROM</span>
<span class="pun">(</span><span class="kwd">SELECT</span><span class="pln"> engine</span><span class="pun">,</span><span class="pln">SUM</span><span class="pun">(</span><span class="pln">data_length</span><span class="pun">)</span><span class="pln"> DSize</span><span class="pun">,</span><span class="pln">SUM</span><span class="pun">(</span><span class="pln">index_length</span><span class="pun">)</span><span class="pln"> ISize</span><span class="pun">,</span><span class="pln">
SUM</span><span class="pun">(</span><span class="pln">data_length</span><span class="pun">+</span><span class="pln">index_length</span><span class="pun">)</span><span class="pln"> TSize </span><span class="kwd">FROM</span><span class="pln">
information_schema</span><span class="pun">.</span><span class="pln">tables </span><span class="kwd">WHERE</span><span class="pln"> table_schema </span><span class="kwd">NOT</span> <span class="kwd">IN</span>
<span class="pun">(</span><span class="str">'mysql'</span><span class="pun">,</span><span class="str">'information_schema'</span><span class="pun">,</span><span class="str">'performance_schema'</span><span class="pun">)</span> <span class="kwd">AND</span><span class="pln">
engine </span><span class="kwd">IS</span> <span class="kwd">NOT</span> <span class="kwd">NULL</span> <span class="kwd">GROUP</span> <span class="kwd">BY</span><span class="pln"> engine </span><span class="kwd">WITH</span><span class="pln"> ROLLUP</span><span class="pun">)</span><span class="pln"> B</span><span class="pun">,</span>
<span class="pun">(</span><span class="kwd">SELECT</span> <span class="lit">3</span><span class="pln"> pw</span><span class="pun">)</span><span class="pln"> A </span><span class="kwd">ORDER</span> <span class="kwd">BY</span><span class="pln"> TSize</span><span class="pun">;</span></code></pre>

<h1>Sizes By Database</h1>

<pre class="lang-sql prettyprint prettyprinted"><code><span class="kwd">SELECT</span><span class="pln"> DBName</span><span class="pun">,</span><span class="pln">CONCAT</span><span class="pun">(</span><span class="pln">LPAD</span><span class="pun">(</span><span class="pln">FORMAT</span><span class="pun">(</span><span class="pln">SDSize</span><span class="pun">/</span><span class="pln">POWER</span><span class="pun">(</span><span class="lit">1024</span><span class="pun">,</span><span class="pln">pw</span><span class="pun">),</span><span class="lit">3</span><span class="pun">),</span><span class="lit">17</span><span class="pun">,</span><span class="str">' '</span><span class="pun">),</span><span class="str">' '</span><span class="pun">,</span><span class="pln">
SUBSTR</span><span class="pun">(</span><span class="str">' KMGTP'</span><span class="pun">,</span><span class="pln">pw</span><span class="lit">+1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),</span><span class="str">'B'</span><span class="pun">)</span> <span class="str">"Data Size"</span><span class="pun">,</span><span class="pln">CONCAT</span><span class="pun">(</span><span class="pln">LPAD</span><span class="pun">(</span><span class="pln">
FORMAT</span><span class="pun">(</span><span class="pln">SXSize</span><span class="pun">/</span><span class="pln">POWER</span><span class="pun">(</span><span class="lit">1024</span><span class="pun">,</span><span class="pln">pw</span><span class="pun">),</span><span class="lit">3</span><span class="pun">),</span><span class="lit">17</span><span class="pun">,</span><span class="str">' '</span><span class="pun">),</span><span class="str">' '</span><span class="pun">,</span><span class="pln">SUBSTR</span><span class="pun">(</span><span class="str">' KMGTP'</span><span class="pun">,</span><span class="pln">pw</span><span class="lit">+1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),</span><span class="str">'B'</span><span class="pun">)</span> <span class="str">"Index Size"</span><span class="pun">,</span><span class="pln">
CONCAT</span><span class="pun">(</span><span class="pln">LPAD</span><span class="pun">(</span><span class="pln">FORMAT</span><span class="pun">(</span><span class="pln">STSize</span><span class="pun">/</span><span class="pln">POWER</span><span class="pun">(</span><span class="lit">1024</span><span class="pun">,</span><span class="pln">pw</span><span class="pun">),</span><span class="lit">3</span><span class="pun">),</span><span class="lit">17</span><span class="pun">,</span><span class="str">' '</span><span class="pun">),</span><span class="str">' '</span><span class="pun">,</span><span class="pln">
SUBSTR</span><span class="pun">(</span><span class="str">' KMGTP'</span><span class="pun">,</span><span class="pln">pw</span><span class="lit">+1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),</span><span class="str">'B'</span><span class="pun">)</span> <span class="str">"Total Size"</span> <span class="kwd">FROM</span>
<span class="pun">(</span><span class="kwd">SELECT</span><span class="pln"> IFNULL</span><span class="pun">(</span><span class="pln">DB</span><span class="pun">,</span><span class="str">'All Databases'</span><span class="pun">)</span><span class="pln"> DBName</span><span class="pun">,</span><span class="pln">SUM</span><span class="pun">(</span><span class="pln">DSize</span><span class="pun">)</span><span class="pln"> SDSize</span><span class="pun">,</span><span class="pln">SUM</span><span class="pun">(</span><span class="pln">XSize</span><span class="pun">)</span><span class="pln"> SXSize</span><span class="pun">,</span><span class="pln">
SUM</span><span class="pun">(</span><span class="pln">TSize</span><span class="pun">)</span><span class="pln"> STSize </span><span class="kwd">FROM</span> <span class="pun">(</span><span class="kwd">SELECT</span><span class="pln"> table_schema DB</span><span class="pun">,</span><span class="pln">data_length DSize</span><span class="pun">,</span><span class="pln">
index_length XSize</span><span class="pun">,</span><span class="pln">data_length</span><span class="pun">+</span><span class="pln">index_length TSize </span><span class="kwd">FROM</span><span class="pln"> information_schema</span><span class="pun">.</span><span class="pln">tables
</span><span class="kwd">WHERE</span><span class="pln"> table_schema </span><span class="kwd">NOT</span> <span class="kwd">IN</span> <span class="pun">(</span><span class="str">'mysql'</span><span class="pun">,</span><span class="str">'information_schema'</span><span class="pun">,</span><span class="str">'performance_schema'</span><span class="pun">))</span><span class="pln"> AAA
</span><span class="kwd">GROUP</span> <span class="kwd">BY</span><span class="pln"> DB </span><span class="kwd">WITH</span><span class="pln"> ROLLUP</span><span class="pun">)</span><span class="pln"> AA</span><span class="pun">,(</span><span class="kwd">SELECT</span> <span class="lit">3</span><span class="pln"> pw</span><span class="pun">)</span><span class="pln"> BB </span><span class="kwd">ORDER</span> <span class="kwd">BY</span> <span class="pun">(</span><span class="pln">SDSize</span><span class="pun">+</span><span class="pln">SXSize</span><span class="pun">);</span></code></pre>

<h1>Sizes By Database/Storage Engine</h1>

<pre class="lang-sql prettyprint prettyprinted"><code><span class="kwd">SELECT</span><span class="pln"> Statistic</span><span class="pun">,</span><span class="pln">DataSize </span><span class="str">"Data Size"</span><span class="pun">,</span><span class="pln">IndexSize </span><span class="str">"Index Size"</span><span class="pun">,</span><span class="pln">TableSize </span><span class="str">"Table Size"</span>
<span class="kwd">FROM</span> <span class="pun">(</span><span class="kwd">SELECT</span> <span class="kwd">IF</span><span class="pun">(</span><span class="pln">ISNULL</span><span class="pun">(</span><span class="pln">table_schema</span><span class="pun">)=</span><span class="lit">1</span><span class="pun">,</span><span class="lit">10</span><span class="pun">,</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> schema_score</span><span class="pun">,</span>
<span class="kwd">IF</span><span class="pun">(</span><span class="pln">ISNULL</span><span class="pun">(</span><span class="pln">engine</span><span class="pun">)=</span><span class="lit">1</span><span class="pun">,</span><span class="lit">10</span><span class="pun">,</span><span class="lit">0</span><span class="pun">)</span><span class="pln"> engine_score</span><span class="pun">,</span>
<span class="kwd">IF</span><span class="pun">(</span><span class="pln">ISNULL</span><span class="pun">(</span><span class="pln">table_schema</span><span class="pun">)=</span><span class="lit">1</span><span class="pun">,</span><span class="str">'ZZZZZZZZZZZZZZZZ'</span><span class="pun">,</span><span class="pln">table_schema</span><span class="pun">)</span><span class="pln"> schemaname</span><span class="pun">,</span>
<span class="kwd">IF</span><span class="pun">(</span><span class="pln">ISNULL</span><span class="pun">(</span><span class="pln">B</span><span class="pun">.</span><span class="pln">table_schema</span><span class="pun">)+</span><span class="pln">ISNULL</span><span class="pun">(</span><span class="pln">B</span><span class="pun">.</span><span class="pln">engine</span><span class="pun">)=</span><span class="lit">2</span><span class="pun">,</span><span class="str">"Storage for All Databases"</span><span class="pun">,</span>
<span class="kwd">IF</span><span class="pun">(</span><span class="pln">ISNULL</span><span class="pun">(</span><span class="pln">B</span><span class="pun">.</span><span class="pln">table_schema</span><span class="pun">)+</span><span class="pln">ISNULL</span><span class="pun">(</span><span class="pln">B</span><span class="pun">.</span><span class="pln">engine</span><span class="pun">)=</span><span class="lit">1</span><span class="pun">,</span><span class="pln">
CONCAT</span><span class="pun">(</span><span class="str">"Storage for "</span><span class="pun">,</span><span class="pln">B</span><span class="pun">.</span><span class="pln">table_schema</span><span class="pun">),</span><span class="pln">
CONCAT</span><span class="pun">(</span><span class="pln">B</span><span class="pun">.</span><span class="pln">engine</span><span class="pun">,</span><span class="str">" Tables for "</span><span class="pun">,</span><span class="pln">B</span><span class="pun">.</span><span class="pln">table_schema</span><span class="pun">)))</span><span class="pln"> Statistic</span><span class="pun">,</span><span class="pln">
CONCAT</span><span class="pun">(</span><span class="pln">LPAD</span><span class="pun">(</span><span class="pln">REPLACE</span><span class="pun">(</span><span class="pln">FORMAT</span><span class="pun">(</span><span class="pln">B</span><span class="pun">.</span><span class="pln">DSize</span><span class="pun">/</span><span class="pln">POWER</span><span class="pun">(</span><span class="lit">1024</span><span class="pun">,</span><span class="pln">pw</span><span class="pun">),</span><span class="lit">3</span><span class="pun">),</span><span class="str">','</span><span class="pun">,</span><span class="str">''</span><span class="pun">),</span><span class="lit">17</span><span class="pun">,</span><span class="str">' '</span><span class="pun">),</span><span class="str">' '</span><span class="pun">,</span><span class="pln">
SUBSTR</span><span class="pun">(</span><span class="str">' KMGTP'</span><span class="pun">,</span><span class="pln">pw</span><span class="lit">+1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),</span><span class="str">'B'</span><span class="pun">)</span><span class="pln"> DataSize</span><span class="pun">,</span><span class="pln">CONCAT</span><span class="pun">(</span><span class="pln">LPAD</span><span class="pun">(</span><span class="pln">REPLACE</span><span class="pun">(</span><span class="pln">
FORMAT</span><span class="pun">(</span><span class="pln">B</span><span class="pun">.</span><span class="pln">ISize</span><span class="pun">/</span><span class="pln">POWER</span><span class="pun">(</span><span class="lit">1024</span><span class="pun">,</span><span class="pln">pw</span><span class="pun">),</span><span class="lit">3</span><span class="pun">),</span><span class="str">','</span><span class="pun">,</span><span class="str">''</span><span class="pun">),</span><span class="lit">17</span><span class="pun">,</span><span class="str">' '</span><span class="pun">),</span><span class="str">' '</span><span class="pun">,</span><span class="pln">
SUBSTR</span><span class="pun">(</span><span class="str">' KMGTP'</span><span class="pun">,</span><span class="pln">pw</span><span class="lit">+1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),</span><span class="str">'B'</span><span class="pun">)</span><span class="pln"> IndexSize</span><span class="pun">,</span><span class="pln">
CONCAT</span><span class="pun">(</span><span class="pln">LPAD</span><span class="pun">(</span><span class="pln">REPLACE</span><span class="pun">(</span><span class="pln">FORMAT</span><span class="pun">(</span><span class="pln">B</span><span class="pun">.</span><span class="pln">TSize</span><span class="pun">/</span><span class="pln">POWER</span><span class="pun">(</span><span class="lit">1024</span><span class="pun">,</span><span class="pln">pw</span><span class="pun">),</span><span class="lit">3</span><span class="pun">),</span><span class="str">','</span><span class="pun">,</span><span class="str">''</span><span class="pun">),</span><span class="lit">17</span><span class="pun">,</span><span class="str">' '</span><span class="pun">),</span><span class="str">' '</span><span class="pun">,</span><span class="pln">
SUBSTR</span><span class="pun">(</span><span class="str">' KMGTP'</span><span class="pun">,</span><span class="pln">pw</span><span class="lit">+1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">),</span><span class="str">'B'</span><span class="pun">)</span><span class="pln"> TableSize </span><span class="kwd">FROM</span> <span class="pun">(</span><span class="kwd">SELECT</span><span class="pln"> table_schema</span><span class="pun">,</span><span class="pln">engine</span><span class="pun">,</span><span class="pln">
SUM</span><span class="pun">(</span><span class="pln">data_length</span><span class="pun">)</span><span class="pln"> DSize</span><span class="pun">,</span><span class="pln">SUM</span><span class="pun">(</span><span class="pln">index_length</span><span class="pun">)</span><span class="pln"> ISize</span><span class="pun">,</span><span class="pln">
SUM</span><span class="pun">(</span><span class="pln">data_length</span><span class="pun">+</span><span class="pln">index_length</span><span class="pun">)</span><span class="pln"> TSize </span><span class="kwd">FROM</span><span class="pln"> information_schema</span><span class="pun">.</span><span class="pln">tables
</span><span class="kwd">WHERE</span><span class="pln"> table_schema </span><span class="kwd">NOT</span> <span class="kwd">IN</span> <span class="pun">(</span><span class="str">'mysql'</span><span class="pun">,</span><span class="str">'information_schema'</span><span class="pun">,</span><span class="str">'performance_schema'</span><span class="pun">)</span>
<span class="kwd">AND</span><span class="pln"> engine </span><span class="kwd">IS</span> <span class="kwd">NOT</span> <span class="kwd">NULL</span> <span class="kwd">GROUP</span> <span class="kwd">BY</span><span class="pln"> table_schema</span><span class="pun">,</span><span class="pln">engine </span><span class="kwd">WITH</span><span class="pln"> ROLLUP</span><span class="pun">)</span><span class="pln"> B</span><span class="pun">,</span>
<span class="pun">(</span><span class="kwd">SELECT</span> <span class="lit">3</span><span class="pln"> pw</span><span class="pun">)</span><span class="pln"> A</span><span class="pun">)</span><span class="pln"> AA </span><span class="kwd">ORDER</span> <span class="kwd">BY</span><span class="pln"> schemaname</span><span class="pun">,</span><span class="pln">schema_score</span><span class="pun">,</span><span class="pln">engine_score</span><span class="pun">;</span></code></pre>

<h1></h1>